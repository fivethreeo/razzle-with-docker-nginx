version: "3.7"

services:

  razzle:
    build:
      target: razzle_development
      context: .
      dockerfile: Dockerfile

    environment:
      PUBLIC_HOST: ${VIRTUAL_HOST:-localhost}
      PUBLIC_PORT: ${PUBLIC_PORT:-}
      PUBLIC_SCHEME: ${PUBLIC_SCHEME:-https}
      RAZZLE_DEV: "true"
      VIRTUAL_HOST1: ${PUBLIC_SCHEME:-https}://${VIRTUAL_HOST:-localhost}:${PUBLIC_PORT:-443} -> :3001
      VIRTUAL_HOST2: ${PUBLIC_SCHEME:-wss}://${VIRTUAL_HOST:-localhost}:${PUBLIC_PORT:-443} -> :3001


    volumes:
      - ./razzle/src:/code/src
      - ./razzle/public:/code/public
      - ./razzle/razzle.config.js:/code/razzle.config.js
      # - ./razzle/.babelrc:/code/.babelrc
      # - ./razzle/.eslintrc.js:/code/.eslintrc.js
